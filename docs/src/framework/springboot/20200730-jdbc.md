---
isOriginal: true
category: Spring Boot 2.7.x
tag: 
    - Spring Boot
    - JDBC
---

# æ•´åˆ JDBC Template å®ä¾‹

> ä½œè€…ï¼š[æ‘é›¨é¥](https://github.com/cunyu1943)
> 
> ä¸è¦å“€æ±‚ï¼Œå­¦ä¼šäº‰å–ï¼Œè‹¥æ˜¯å¦‚æ­¤ï¼Œç»ˆæœ‰æ‰€è·
>

## ğŸˆ å·å¤–

æœ€è¿‘ï¼Œå…¬ä¼—å·ä¹‹å¤–ï¼Œå»ºç«‹äº†å¾®ä¿¡äº¤æµç¾¤ï¼Œä¸å®šæœŸä¼šåœ¨ç¾¤é‡Œåˆ†äº«å„ç§èµ„æºï¼ˆå½±è§†ã€IT ç¼–ç¨‹ã€è€ƒè¯•æå‡â€¦â€¦ï¼‰&çŸ¥è¯†ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥**æ‰«ç æˆ–è€…åå°æ·»åŠ å°ç¼–å¾®ä¿¡å¤‡æ³¨å…¥ç¾¤**ã€‚è¿›ç¾¤å**ä¼˜å…ˆçœ‹ç¾¤å…¬å‘Š**ï¼Œ**å‘¼å«ç¾¤ä¸­ã€èµ„æºåˆ†äº«å°åŠ©æ‰‹ã€‘**ï¼Œè¿˜èƒ½å…è´¹å¸®æ‰¾èµ„æºå“¦ï½

<center>
<img src="/contact/wxgroup.jpg" width="150"> 
</center>

## å‰è¨€

åœ¨ Spring Boot ä¸­ï¼Œå¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼ˆSQLï¼‰è¿˜æ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼ˆNo

SQLï¼‰ï¼Œå…¶åº•å±‚å‡é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚

Spring æ¡†æ¶å¯¹æ•°æ®åº“çš„æ“ä½œåœ¨ JDBC ä¸Šåšäº†æ·±å±‚æ¬¡çš„å°è£…ï¼Œé€šè¿‡ **ä¾èµ–æ³¨å…¥** å°† DataSource æ³¨å†Œåˆ° `JdbcTemplate` ä¸­ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿè½»æ˜“çš„å®Œæˆå¯¹è±¡å…³ç³»æ˜ å°„ã€‚è€Œä¸” JDBC æœ‰ç€å¦‚ä¸‹çš„ç‰¹ç‚¹ï¼š

1.  ç›¸è¾ƒäºå…¶ä»– ORM æ¡†æ¶ï¼ŒJDBC çš„é€Ÿåº¦æ— ç–‘æ˜¯æœ€å¿«çš„ï¼›
2.  é…ç½®ç®€å•ï¼Œå‡ ä¹ç”¨ä¸é¢å¤–é…ç½®ï¼›
3.  å­¦ä¹ æˆæœ¬ä½ï¼›

## æ•´åˆ JDBC

### ä¾èµ–é…ç½®

åˆ›å»ºä¸€ä¸ª Spring Boot é¡¹ç›®ï¼Œåœ¨ `pom.xml` å¼•å…¥ Web æ¨¡å—ã€ SQL æ¨¡å—ä»¥åŠ Jdbc Template çš„ä¾èµ–ï¼› 

```xml
<!--    Web æ¨¡å—ä¾èµ–    -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
<!--    SQL æ¨¡å—ä¾èµ–    -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <scope>runtime</scope>
</dependency>
<!--    Jdbc Template æ¨¡å—ä¾èµ–    -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-jdbc</artifactId>
</dependency>
```

###  æ•°æ®åº“å‡†å¤‡

1.  æ•°æ®åº“åˆ›å»ºåŠè¾“å…¥æ’å…¥

å‡†å¤‡ä¸€å¼  `user` è¡¨ï¼Œæœ‰ `id`ã€`name`ã€`age` ä¸‰ä¸ªå±æ€§ï¼Œå…¶ä¸­ `id` ä¸ºä¸»é”®ä¸”è‡ªå¢ï¼Œç„¶åæ’å…¥ä¸‰æ¡æ•°æ®ï¼›

```sql
CREATE DATABASE springboot;
USE springboot;
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',
  `name` varchar(50) DEFAULT NULL COMMENT 'å§“å',
  `age` int(11) DEFAULT NULL COMMENT 'å¹´é¾„',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

INSERT INTO  user values (1,"æ‘é›¨é¥",25);
INSERT INTO  user values (2,"å¼ ä¸‰",26);
INSERT INTO  user values (3,"æå››",27);
```

2.  æ•°æ®æºé…ç½®

åœ¨ `application.properties` ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ç”¨äºè¿æ¥æ•°æ®åº“ï¼ˆSpring Boot é»˜è®¤è‡ªåŠ¨é…ç½® `DataSource`ï¼Œä¸”ä¼˜å…ˆé‡‡ç”¨ `HikariCP` è¿æ¥æ±  ï¼‰ï¼›

```properties
# æ•°æ®åº“é…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&userUnicode=true&characterEncoding=utf-8
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password=123456
# è¿æ¥æ± 
# spring.datasource.type = HikariCP
```

###  å®ä½“ç±»

```java
package com.cunyu.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.stereotype.Component;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Author
 * @date : 2020/7/29 16:20
 * @description : User å®ä½“ç±»
 */

@Component
@Data
@AllArgsConstructor
@NoArgsConstructor
public class User {
    private Long id;
    private String name;
    private Integer age;
}
```

### service å±‚

```java
package com.cunyu.service;

import com.cunyu.pojo.User;

import java.util.List;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : UserService
 * @date : 2020/7/29 21:12
 * @description : TODO
 */

public interface UserService {
    /**
     * @param
     * @return
     * @description è·å–æ‰€æœ‰æ•°æ®åˆ—è¡¨
     * @date 2020/7/29 21:57
     * @author cunyu1943
     * @version 1.0
     */
    public List<User> getList();
}

```

```java
package com.cunyu.service.Impl;

import com.cunyu.pojo.User;
import com.cunyu.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Service;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.List;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : UserServiceImpl
 * @date : 2020/7/29 21:13
 * @description : TODO
 */

@Service
public class UserServiceImpl implements UserService {

    private final JdbcTemplate jdbcTemplate;

    public UserServiceImpl(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    @Override
    public List<User> getList() {
        String sql = "SELECT id, name, age FROM user";
        return (List<User>) jdbcTemplate.query(sql, new RowMapper<User>() {

            @Override
            public User mapRow(ResultSet resultSet, int i) throws SQLException {
                User user = new User();
                user.setId(resultSet.getLong("id"));
                user.setName(resultSet.getString("name"));
                user.setAge(resultSet.getInt("age"));
                return user;
            }
        });
    }
}
```

### controller å±‚

```java
package com.cunyu.controller;

import com.cunyu.pojo.User;
import com.cunyu.service.UserService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.servlet.ModelAndView;

import java.util.List;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : UserController
 * @date : 2020/7/29 16:22
 * @description : UserController
 */


@RequestMapping("/user")
@RestController
public class UserController {
    private static final Logger logger = LoggerFactory.getLogger(UserController.class);

    private final UserService userService;

    public UserController(UserService userService) {
        this.userService = userService;
    }

    @GetMapping("/list")
    public List<User> getUsers() {
        logger.info("ä»æ•°æ®åº“è¯»å–æ•°æ®");
        return userService.getList();
    }
}
```

###  ç»“æœ

å¯åŠ¨ Spring Bootï¼Œç„¶åè®¿é—® `http://localhost:8080/user/list`ï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„å†…å®¹ï¼Œåˆ™è¯´æ˜æ•´åˆ JDBC æˆåŠŸï¼›

![](assets/20200730-jdbc/36de70fe7095ce899d78090d21069ee1.webp)

![](assets/20200730-jdbc/bfa9a133e78d34fb4fc75abe556726b5.webp)

## æ€»ç»“

ä»¥ä¸Šå°±æ˜¯ Spring Boot æ•´åˆ JDBC çš„å…·ä½“è¿‡ç¨‹äº†ï¼Œå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè¿˜è¯·å¸®å¿™ç‚¹ä¸ªèµå†èµ°å‘€ï¼