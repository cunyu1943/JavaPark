---
isOriginal: true
category: Spring Boot 2.7.x
tag: Spring Boot
date: 2021-10-03
---

# é…ç½®è¯¦è§£

## ğŸˆ å·å¤–

æœ€è¿‘ï¼Œå…¬ä¼—å·ä¹‹å¤–ï¼Œå»ºç«‹äº†å¾®ä¿¡äº¤æµç¾¤ï¼Œä¸å®šæœŸä¼šåœ¨ç¾¤é‡Œåˆ†äº«å„ç§èµ„æºï¼ˆå½±è§†ã€IT ç¼–ç¨‹ã€è€ƒè¯•æå‡â€¦â€¦ï¼‰&çŸ¥è¯†ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥**æ‰«ç æˆ–è€…åå°æ·»åŠ å°ç¼–å¾®ä¿¡å¤‡æ³¨å…¥ç¾¤**ã€‚è¿›ç¾¤å**ä¼˜å…ˆçœ‹ç¾¤å…¬å‘Š**ï¼Œ**å‘¼å«ç¾¤ä¸­ã€èµ„æºåˆ†äº«å°åŠ©æ‰‹ã€‘**ï¼Œè¿˜èƒ½å…è´¹å¸®æ‰¾èµ„æºå“¦ï½

<center>
<img src="/contact/wxgroup.jpg" width="150"> 
</center>

##  å‰è¨€

ä¸ºäº† Spring Boot èƒ½å¤Ÿæ›´å¥½åœ°ç”Ÿæˆé…ç½®å…ƒæ•°æ®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºé¡¹ç›®æ—¶æ·»åŠ  `Spring Configuartion Processor` ä¾èµ–ï¼Œæˆ–è€…åœ¨åˆ›å»ºå¥½é¡¹ç›®åçš„ `pom.xml` æ–‡ä»¶ä¸­æ‰‹åŠ¨æ·»åŠ ã€‚æ·»åŠ è¯¥ä¾èµ–åï¼Œæˆ‘ä»¬åœ¨ç¼–å†™é…ç½®æ—¶å°±ä¼šæœ‰å±æ€§æç¤ºï¼Œå¤§å¤§é™ä½ç¼–å†™é”™è¯¯ã€‚

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
```

##  application.properties



### è‡ªå®šä¹‰å±æ€§

`application.properties` é…ç½®æ–‡ä»¶æ˜¯åˆ›å»ºé¡¹ç›®åå°±è‡ªå¸¦çš„ï¼Œå¦‚æœæˆ‘ä»¬è¦è‡ªå®šä¹‰å±æ€§ï¼Œå¯ä»¥åœ¨å…¶ä¸­ç›´æ¥é…ç½®ï¼Œé…ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š

1.  åœ¨ `application.properties` ä¸­æ·»åŠ æˆ‘ä»¬è¦è‡ªå®šä¹‰çš„é…ç½®ï¼›

```properties
cunyu.id=1024
cunyu.name=æ‘é›¨é¥
cunyu.website=https://cunyu1943.github.io
```

2.  åˆ›å»ºå®ä½“ç±»æ¥æ˜ å°„æˆ‘ä»¬é…ç½®çš„å±æ€§ï¼›

```java
package com.cunyu.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : CunyuProperties
 * @date : 2020/7/29 13:34
 * @description : TODO
 */

@Component
@ConfigurationProperties(prefix = "cunyu")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class CunyuProperties {
    private int id;
    private String name;
    private String website;
}
```

3.  å®šä¹‰ Controller æ¥æ³¨å…¥æµ‹è¯•ï¼›

```java
package com.cunyu.controller;

import com.cunyu.pojo.CunyuProperties;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : CunyuPropertiesController
 * @date : 2020/7/29 13:37
 * @description : TODO
 */

@RestController
@RequestMapping("/cunyu")
public class CunyuPropertiesController {
    private static final Logger logger = LoggerFactory.getLogger(CunyuPropertiesController.class);

    @Autowired
    CunyuProperties cunyuProperties;

    @GetMapping("/profile")
    public String cunyuProfile(){
        logger.info("---------------");
        logger.info(cunyuProperties.toString());
        logger.info("---------------");
        return cunyuProperties.toString();
    }
}
```

4.  æ‰“å¼€ç½‘é¡µæµ‹è¯•ï¼Œæ‰“å¼€ 1ï¼ŒåŒæ—¶è§‚å¯Ÿæ§åˆ¶å°ï¼Œæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹åˆ™è¯´æ˜å±æ€§æ³¨å…¥æˆåŠŸï¼›

![](assets/20211003-config/a749931a1ed4fed321f2fed10ff39524.webp)

![](assets/20211003-config/7e41a871c0d8b2992e37f7a5d587b486.webp)

### å¤šç¯å¢ƒé…ç½®

å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦å¤šä¸ªç¯å¢ƒï¼ˆå¦‚ **å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§**ç­‰ï¼‰ï¼Œè€Œä¸åŒç¯å¢ƒçš„é…ç½®éƒ½ä¸ä¸€æ ·ï¼Œæ­¤æ—¶é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼›

1.  åˆ›å»ºä¸åŒç¯å¢ƒå¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åä¸º `application-{profile}.properties`ï¼Œ`{profile}` ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰ç¯å¢ƒï¼Œå¦‚ä¸‹ï¼š

>   å¼€å‘ç¯å¢ƒï¼šapplication-dev.properties

```properties
server.servlet.context-path=/dev
```

>   æµ‹è¯•ç¯å¢ƒï¼šapplication-test.properties

```properties
server.servlet.context-path=/test
```

>   ç”Ÿäº§ç¯å¢ƒï¼šapplication-prod.properties

```properties
server.servlet.context-path=/prod
```

2.  ç„¶ååœ¨ `application.properties` ä¸­åŠ å…¥æ¿€æ´»çš„ç¯å¢ƒï¼Œæ­¤æ—¶å°±ä¼šæ¿€æ´»å¯¹åº”ç¯å¢ƒçš„é…ç½®ï¼›

```properties
# {profile} å¯¹åº”ä¸Šè¿°çš„ devã€testã€prod
spring.profiles.active={profile}
```

ä¹‹æ‰€ä»¥è¦åˆ†ä¸ºå¤šä¸ªç¯å¢ƒçš„é…ç½®ï¼Œä¸»è¦æ˜¯æ–¹ä¾¿åœ¨ä¸åŒç¯å¢ƒä¸­å¼€å‘çš„éœ€æ±‚ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å¼€å‘æ–°åŠŸèƒ½ï¼Œé‚£æ­¤æ—¶å°±å¯ä»¥æ¿€æ´»å¼€å‘é…ç½®æ–‡ä»¶çš„ç›¸å…³è®¾ç½®ï¼Œç­‰å¾…æˆ‘ä»¬å¼€å‘å®Œæˆä¹‹åï¼Œç„¶åå†åˆ‡æ¢åˆ°æµ‹è¯•ç¯å¢ƒè¿›è¡Œæµ‹è¯•ã€‚è€Œç»è¿‡ä¸¥æ ¼çš„æµ‹è¯•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æ–°æ¨å‡ºçš„åŠŸèƒ½ä¸Šçº¿åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚çºµè§‚æ•´ä¸ªå¼€å‘æµç¨‹ï¼Œæˆ‘ä»¬æ—¢å®Œæˆäº†æ–°åŠŸèƒ½çš„å¼€å‘ï¼Œä¹Ÿæ²¡æœ‰å½±å“åˆ°ç”¨æˆ·å¯¹ç°æœ‰ç³»ç»Ÿçš„ä½¿ç”¨ï¼Œæ‰€ä»¥ç°åœ¨å¤§å®¶åŸºæœ¬éƒ½æ˜¯åŸºäºè¿™ç§æ¨¡å¼æ¥è¿›è¡Œä¸šåŠ¡å¼€å‘ã€‚

## è‡ªå®šä¹‰é…ç½®æ–‡ä»¶

å‡å¦‚æˆ‘ä»¬ä¸æƒ³ç”¨é¡¹ç›®è‡ªå¸¦çš„ `application.properties` é…ç½®ç¯å¢ƒï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æˆ‘ä»¬éœ€è¦çš„é…ç½®ã€‚ä½†è¯¥å¦‚ä½•é…ç½®å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹ ~

1.  é¦–å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ `my.properties`ï¼Œæ–‡ä»¶åå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯åç¼€è¦ä¿æŒä¸€è‡´ï¼Œç„¶ååœ¨å…¶ä¸­åŠ å…¥æˆ‘ä»¬è‡ªå®šä¹‰é…ç½®çš„å±æ€§ï¼›

```properties
my.id=1024
my.name=æ‘é›¨é¥
my.website=https://cunyu1943.github.io
```

2.  å®šä¹‰å®ä½“ç±»ï¼Œç”¨äºæ˜ å°„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ï¼›

```java
package com.cunyu.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.PropertySource;
import org.springframework.stereotype.Component;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : MyProperties
 * @date : 2020/7/29 14:05
 * @description : TODO
 */

@Component
@PropertySource("classpath:my.properties")
@ConfigurationProperties(prefix = "my")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class MyProperties {
    private int id;
    private String name;
    private String website;
}
```

3.  å®šä¹‰ Controller æ¥æ³¨å…¥æµ‹è¯•

```java
package com.cunyu.controller;

import com.cunyu.pojo.MyProperties;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : MyPropertiesController
 * @date : 2020/7/29 14:07
 * @description : TODO
 */

@RestController
@RequestMapping("/my")
public class MyPropertiesController {
    private static final Logger logger = LoggerFactory.getLogger(MyPropertiesController.class);

    @Autowired
    MyProperties myProperties;

    @GetMapping("/profile")
    public String myProfile() {
        logger.info("=============");
        logger.info(myProperties.toString());
        logger.info("=============");
        
        return myProperties.toString();
    }
}
```

4.  æ‰“å¼€ç½‘é¡µæµ‹è¯•ï¼Œæ‰“å¼€ `http://localhost:8080/my/profile`ï¼ŒåŒæ—¶è§‚å¯Ÿæ§åˆ¶å°ï¼Œæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹åˆ™è¯´æ˜å±æ€§æ³¨å…¥æˆåŠŸï¼›

![](assets/20211003-config/fd2d14ade1c670b6c41706e9fe33918b.webp)

![](assets/20211003-config/83a11edacd179ff4d36d115efae92b8c.webp)

##  æ³¨æ„

`application.properties` å’Œ `my.properties` ä¼šä¼˜å…ˆåŠ è½½ `application.properties`ã€‚

## .yml å’Œ .properties

ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨ IDEA åˆ›å»ºä¸€ä¸ª Spring Boot é¡¹ç›®æ—¶ï¼Œé»˜è®¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ª `application.properties` çš„é…ç½®æ–‡ä»¶ã€‚è¯¥é…ç½®æ–‡ä»¶æ˜¯ç”¨æ¥ **ä¿®æ”¹ Spring Boot è‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼**ã€‚ ä½†æœ‰çš„æœ‹å‹ä¼šæ›´å€¾å‘äºä½¿ç”¨ `application.yml`ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ä¸¤ç§æ ¼å¼åˆ°åº•æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ

å¼€å§‹æ¯”è¾ƒä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å„è‡ªçš„å®ä¾‹ï¼š

- **.properties æ ¼å¼** 

```properties
server.port=8081
spring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource
spring.datasource.url=jdbc:mysql://aliyuncs.com:3306/database?useUnicode=true&zeroDateTimeBehavior=convertToNull&autoReconnect=true
spring.datasource.username=root
spring.datasource.password=******
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
```

- **.yml æ ¼å¼**

```yml
server:
  port: 8082
spring:
    datasource:
        name: test
        url: jdbc:mysql://127.0.0.1:3306/database
        username: root
        password: ******
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.jdbc.Driver
```

ä»ä¸Šé¢çš„å®ä¾‹æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸¤è€…çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š

1.  **è¯­æ³•ç»“æ„**

-   `.properties` æ ¼å¼ä½¿ç”¨çš„æ˜¯ **é”®å€¼å¯¹å½¢å¼ï¼ˆkey=valueï¼‰**ï¼Œè€Œ `.yml` æ ¼å¼åˆ™ä½¿ç”¨çš„æ˜¯ **æ ‘çŠ¶ç»“æ„ï¼ˆkey: valueï¼‰**ï¼›

-   `.properties` æ ¼å¼é€šè¿‡ `.` æ¥è¿æ¥ï¼Œ`=` æ¥èµ‹å€¼ï¼Œç»“æ„ä¸Šæ¯”è¾ƒç›´æ¥ï¼Œè€Œ `.yml` æ ¼å¼åˆ™ä½¿ç”¨ `:` æ¥åˆ†å±‚ï¼Œç»“æ„ä¸Šå‘ˆç°æ ‘çŠ¶ç»“æ„ï¼Œå±‚æ¬¡æ„Ÿæ˜æ˜¾ï¼Œè€Œä¸”èµ‹å€¼æ—¶ `:` çš„åè¾¹å¿…é¡» **æ¥ç€ä¸€ä¸ªç©ºæ ¼å†èµ‹å€¼**

2.   **æ‰§è¡Œå…ˆåé¡ºåº**

å¦‚æœä¸€ä¸ªå·¥ç¨‹ä¸­åŒæ—¶å­˜åœ¨ä¸¤ç§æ ¼å¼çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼š **ä¼˜å…ˆåŠ è½½ `.yml`  æ–‡ä»¶ï¼Œç„¶åå†åŠ è½½ `.properties`ï¼Œè€Œä¸”ååŠ è½½çš„ `.properties` ä¼šè¦†ç›–ä¹‹å‰åŠ è½½çš„ `.yml` æ–‡ä»¶**ã€‚

æ­¤å¤–ï¼Œ`.yml` é…ç½®æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **ç¼©è¿›å¿…é¡»ç”¨ç©ºæ ¼ï¼Œä¸èƒ½ç”¨ Tab**
2. `@PropertySource` æ³¨è§£ä¸èƒ½åŠ è½½ `yml` æ–‡ä»¶

## æ€»ç»“

ä»¥ä¸Šå°±æ˜¯å…³äº Spring Boot ä¸­çš„é…ç½®ç›¸å…³å†…å®¹äº†ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»äº† Spring Boot é¡¹ç›®è‡ªå¸¦çš„é…ç½®æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿä»‹ç»äº†å¦‚æœæˆ‘ä»¬æƒ³è¦æ»¡è¶³è‡ªå·±éœ€æ±‚å¦‚ä½•è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚æœ€åï¼Œåˆ™æ˜¯å¯¹ `.yml` å’Œ `.properties` ä¸åŒæ ¼å¼çš„é…ç½®æ–‡ä»¶çš„åŒºåˆ«è¿›è¡Œè§£é‡Šã€‚
