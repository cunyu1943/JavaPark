---
isOriginal: true
order: 1
category:
  - Java åŸºç¡€
tag:
    - Java
    - åå°„
---
# åå°„æœºåˆ¶è¯¦è§£

> ä½œè€…ï¼š[æ‘é›¨é¥](https://github.com/cunyu1943)
> 
> ä¸è¦å“€æ±‚ï¼Œå­¦ä¼šäº‰å–ï¼Œè‹¥æ˜¯å¦‚æ­¤ï¼Œç»ˆæœ‰æ‰€è·
>
> åŸæ–‡ï¼šhttps://mp.weixin.qq.com/s/f0sJpAhgI6B7oirsJfv9jQ


## ğŸˆ å·å¤–

æœ€è¿‘ï¼Œå…¬ä¼—å·ä¹‹å¤–ï¼Œå»ºç«‹äº†å¾®ä¿¡äº¤æµç¾¤ï¼Œä¸å®šæœŸä¼šåœ¨ç¾¤é‡Œåˆ†äº«å„ç§èµ„æºï¼ˆå½±è§†ã€IT ç¼–ç¨‹ã€è€ƒè¯•æå‡â€¦â€¦ï¼‰&çŸ¥è¯†ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥**æ‰«ç æˆ–è€…åå°æ·»åŠ å°ç¼–å¾®ä¿¡å¤‡æ³¨å…¥ç¾¤**ã€‚è¿›ç¾¤å**ä¼˜å…ˆçœ‹ç¾¤å…¬å‘Š**ï¼Œ**å‘¼å«ç¾¤ä¸­ã€èµ„æºåˆ†äº«å°åŠ©æ‰‹ã€‘**ï¼Œè¿˜èƒ½å…è´¹å¸®æ‰¾èµ„æºå“¦ï½

<center>
<img src="/contact/wxgroup.jpg" width="150"> 
</center>

## åå°„æ¦‚è¿°

### ä»€ä¹ˆæ˜¯åå°„

å°†ç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…ä¸ºå…¶ä»–å¯¹è±¡çš„è¿‡ç¨‹å°±å«åš **åå°„**ï¼Œå…¶ä¸­ **ç»„æˆéƒ¨åˆ†** æŒ‡çš„æ˜¯æˆ‘ä»¬ç±»çš„ **æˆå‘˜å˜é‡ï¼ˆFieldï¼‰**ã€**æ„é€ æ–¹æ³•ï¼ˆConstructorï¼‰**ã€**æˆå‘˜æ–¹æ³•ï¼ˆMethodï¼‰**ã€‚

### ä½¿ç”¨åå°„çš„ä¼˜ç¼ºç‚¹

- **ä¼˜ç‚¹**

  1.  åœ¨ **ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­** å¯ä»¥æ“ä½œç±»å¯¹è±¡ï¼Œå¢åŠ äº†ç¨‹åºçš„çµæ´»æ€§ï¼›
  2.  è§£è€¦ï¼Œä»è€Œæé«˜ç¨‹åºçš„å¯æ‰©å±•æ€§ï¼Œæé«˜ä»£ç çš„å¤ç”¨ç‡ï¼Œæ–¹ä¾¿å¤–éƒ¨è°ƒç”¨ï¼›
  3.  å¯¹äºä»»ä½•ä¸€ä¸ªç±»ï¼Œå½“çŸ¥é“å®ƒçš„ç±»ååï¼Œå°±èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›è€Œå¯¹äºä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä¸€ä¸ªä»»æ„æ–¹æ³•ã€‚

- **ç¼ºç‚¹**
  1.  **æ€§èƒ½é—®é¢˜**ï¼šJava åå°„ä¸­åŒ…å«äº†ä¸€äº›åŠ¨æ€ç±»å‹ï¼ŒJVM æ— æ³•å¯¹è¿™äº›åŠ¨æ€ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå› æ­¤é€šè¿‡åå°„æ¥æ“ä½œçš„æ–¹å¼è¦æ¯”æ­£å¸¸æ“ä½œæ•ˆç‡æ›´ä½ã€‚
  2.  **å®‰å…¨é—®é¢˜**ï¼šä½¿ç”¨åå°„æ—¶è¦æ±‚ç¨‹åºå¿…é¡»åœ¨ä¸€ä¸ªæ²¡æœ‰å®‰å…¨é™åˆ¶çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå¦‚æœç¨‹åºæœ‰å®‰å…¨é™åˆ¶ï¼Œå°±ä¸èƒ½ä½¿ç”¨åå°„ã€‚
  3.  **ç¨‹åºå¥å£®æ€§**ï¼šåå°„å…è®¸ä»£ç æ‰§è¡Œä¸€äº›å¹³å¸¸ä¸è¢«å…è®¸çš„æ“ä½œï¼Œç ´åäº†ç¨‹åºç»“æ„çš„æŠ½è±¡æ€§ï¼Œå¯¼è‡´å¹³å°å‘ç”Ÿå˜åŒ–æ—¶æŠ½è±¡çš„é€»è¾‘ç»“æ„æ— æ³•è¢«è¯†åˆ«ã€‚

## Class å¯¹è±¡çš„è·å–åŠä½¿ç”¨

### è·å– Class å¯¹è±¡çš„æ–¹å¼

1. `Class.forName("å…¨ç±»å")`

æºä»£ç é˜¶æ®µï¼Œå®ƒèƒ½å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ä¸­ï¼Œç„¶åè¿”å› `Class` å¯¹è±¡ï¼Œå¤šç”¨äº **é…ç½®æ–‡ä»¶** ä¸­ï¼Œå°†ç±»åå®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡è¯»å–é…ç½®æ–‡ä»¶æ¥åŠ è½½ç±»ã€‚

2. `ç±»å.class`

ç±»å¯¹è±¡é˜¶æ®µï¼Œé€šè¿‡ç±»åçš„ `class` å±æ€§æ¥è·å–ï¼Œå¤šç”¨äº **å‚æ•°çš„ä¼ é€’**ã€‚

3. `å¯¹è±¡.getClass()`

è¿è¡Œæ—¶é˜¶æ®µï¼Œ`getClass()` å®šä¹‰åœ¨ `Object` ç±»ä¸­ï¼Œè¡¨æ˜æ‰€æœ‰ç±»éƒ½èƒ½ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¤šç”¨äº **å¯¹è±¡çš„è·å–å­—èŠ‚ç ** çš„æ–¹å¼ã€‚

æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ª `Person` ç±»ï¼Œç”¨äºåç»­åå°„åŠŸèƒ½çš„æµ‹è¯•ï¼›

```java
package com.cunyu;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Person
 * @date : 2021/4/7 22:37
 * @description : Person ç±»
 */

public class Person {
    private int age;
    private String name;
    public long id;
    public long grade;
    protected float score;
    protected int rank;


    public Person(int age, String name, long id, long grade, float score, int rank) {
        this.age = age;
        this.name = name;
        this.id = id;
        this.grade = grade;
        this.score = score;
        this.rank = rank;
    }

    public Person() {
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public long getGrade() {
        return grade;
    }

    public void setGrade(long grade) {
        this.grade = grade;
    }

    public float getScore() {
        return score;
    }

    public void setScore(float score) {
        this.score = score;
    }

    public int getRank() {
        return rank;
    }

    public void setRank(int rank) {
        this.rank = rank;
    }

    @Override
    public String toString() {
        final StringBuffer sb = new StringBuffer("Person{");
        sb.append("age=").append(age);
        sb.append(", name='").append(name).append('\'');
        sb.append(", id=").append(id);
        sb.append(", grade=").append(grade);
        sb.append(", score=").append(score);
        sb.append(", rank=").append(rank);
        sb.append('}');
        return sb.toString();
    }
}
```

å®šä¹‰å¥½ `Person` ç±»ä¹‹åï¼Œæˆ‘ä»¬å°è¯•ç”¨ 3 ç§ä¸åŒçš„æ–¹å¼æ¥è·å– `Class` å¯¹è±¡ï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬æ˜¯å¦ç›¸åŒã€‚

```java
package com.cunyu;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo1
 * @date : 2021/4/7 23:29
 * @description : Class å¯¹è±¡çš„è·å–
 */

public class Demo1 {
    public static void main(String[] args) throws ClassNotFoundException {
//        ç¬¬ä¸€ç§æ–¹å¼ï¼ŒClass.forName("å…¨ç±»å")
        Class class1 = Class.forName("com.cunyu.Person");
        System.out.println(class1);

//        ç¬¬äºŒç§æ–¹å¼ï¼Œç±»å.class
        Class class2 = Person.class;
        System.out.println(class2);

//        ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå¯¹è±¡.getName()
        Person person = new Person();
        Class class3 = person.getClass();
        System.out.println(class3);

//        æ¯”è¾ƒä¸‰ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒ
        System.out.println(class1 == class2);
        System.out.println(class1 == class3);
    }
}
```

![](./assets/20220716-reflection/class-obj.png)

ä¸Šè¿°ä»£ç ä¸­ï¼Œä¼šå‘ç°æœ€åè¾“å‡ºçš„æ¯”è¾ƒç»“æœè¿”å›çš„æ˜¯ä¸¤ä¸ª `true`ï¼Œè¯´æ˜é€šè¿‡ä¸Šè¿°ä¸‰ç§æ–¹å¼è·å–çš„ `Class` å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªï¼Œ**åŒä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ï¼ˆ`*.class`ï¼‰åœ¨ä¸€æ¬¡è¿è¡Œè¿‡ç¨‹ä¸­åªä¼šè¢«åŠ è½½ä¸€æ¬¡**ã€‚

### Class å¯¹è±¡çš„ä½¿ç”¨

#### è·å–æˆå‘˜å˜é‡

| æ–¹æ³•                                  | è¯´æ˜                                                                           |
| ------------------------------------- | ------------------------------------------------------------------------------ |
| `Field[] getFields()`                 | è¿”å›åŒ…å«ä¸€ä¸ªæ•°ç»„ `Field`å¯¹è±¡åå°„ç”±æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æ‰€æœ‰å¯è®¿é—®çš„å…¬å…±å­—æ®µç±»å¯¹è±¡ |
| `Field getField(String name)`         | è¿”å›ä¸€ä¸ª `Field`å¯¹è±¡ï¼Œå®ƒåæ˜ æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šå…¬å…±æˆå‘˜å­—æ®µç±»å¯¹è±¡           |
| `Field[] getDeclaredFields()`         | è¿”å›çš„æ•°ç»„ `Field`å¯¹è±¡åæ˜ æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£å£°æ˜çš„æ‰€æœ‰å­—æ®µç±»å¯¹è±¡                 |
| `Field getDeclaredField(String name)` | è¿”å›ä¸€ä¸ª `Field`å¯¹è±¡ï¼Œå®ƒåæ˜ æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šå·²å£°æ˜å­—æ®µç±»å¯¹è±¡             |

- `Field[] getFields()`

```java
package com.cunyu;

import java.lang.reflect.Field;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo2
 * @date : 2021/4/7 23:39
 * @description : Class å¯¹è±¡çš„ä½¿ç”¨
 */

public class Demo2 {
    public static void main(String[] args) throws ClassNotFoundException {
        Class class1 = Class.forName("com.cunyu.Person");

        Field[] fields = class1.getFields();
        for (Field field : fields) {
            System.out.println(field);
        }

    }
}
```

![](./assets/20220716-reflection/class-attr.png)

å›é¡¾ä¸‹æˆ‘ä»¬çš„ `Person` ç±»ï¼Œå¯ä»¥å‘ç° `id`ã€`grade` æˆå‘˜å˜é‡éƒ½æ˜¯è¢« `public` æ‰€ä¿®é¥°çš„ï¼Œè¯´æ˜è¯¥æ–¹æ³•æ˜¯ç”¨äºè·å–ç±»ä¸­æ‰€æœ‰è¢« `public` æ‰€ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼ˆ**åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚

- `Field getField(String name)`

```java
package com.cunyu;

import java.lang.reflect.Field;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo2
 * @date : 2021/4/7 23:39
 * @description : Class å¯¹è±¡çš„ä½¿ç”¨
 */

public class Demo2 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException {
        Class class1 = Class.forName("com.cunyu.Person");

        Field field1 = class1.getField("id");
        System.out.println(field1);
        Field field2 = class1.getField("age");
        System.out.println(field2);
        Field field3 = class1.getField("rank");
        System.out.println(field3);

    }
}
```

![](./assets/20220716-reflection/attr-fail1.png)

![](./assets/20220716-reflection/attr-fail2.png)

ä»ä¸Šé¢çš„ç»“æœåˆ†æå¯çŸ¥ï¼Œè¯¥æ–¹æ³•åªèƒ½ç”¨äºè·å–ç±»ä¸­æŒ‡å®šåç§°çš„ `public` æ‰€ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå¯¹äº `protected`ã€`private` æ‰€ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œè¯¥æ–¹æ³•æ˜¯æ— æ³•è·å–çš„ï¼ˆ**åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚è€Œè·å–æˆ–è®¾ç½®æˆå‘˜å˜é‡å€¼æ—¶ï¼Œå¯ä»¥é€šè¿‡ `get/set` æ–¹æ³•æ¥æ“ä½œï¼Œå…·ä½“æ“ä½œæ–¹æ³•å¦‚ä¸‹ã€‚

```java
// å‡è®¾æˆ‘ä»¬è·å–åˆ°çš„ Field ä¸ºä¸Šé¢çš„ idï¼Œè·å–å’Œè®¾ç½® id çš„å€¼å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹æ“ä½œæ¥è¿›è¡Œ
// 1. è·å–
Field idField = personClass.getField("id");
Person person = new Person();
Object idValue = idField.get(person);
System.out.println("idï¼š" + idValue);
// 2. è®¾ç½®
idField.set(person, "1312120");
System.out.println("personï¼š" + person);
```

- `Field[] getDeclaredFields()`

```java
package com.cunyu;

import java.lang.reflect.Field;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo2
 * @date : 2021/4/7 23:39
 * @description : Class å¯¹è±¡çš„ä½¿ç”¨
 */

public class Demo2 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException {
        Class class1 = Class.forName("com.cunyu.Person");

        Field[] fields = class1.getDeclaredFields();
        for (Field field : fields) {
            System.out.println(field);
        }
    }
}
```

![](./assets/20220716-reflection/field.png)

è§‚å¯Ÿä¸Šé¢çš„ç»“æœå¯çŸ¥ï¼Œè¯¥æ–¹æ³•å¯ç”¨äºè·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸ç”¨è€ƒè™‘ä¿®é¥°ç¬¦çš„é™åˆ¶ï¼ˆ**ä¸åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚

- `Field getDeclaredField(String name)`

```java
package com.cunyu;

import java.lang.reflect.Field;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo2
 * @date : 2021/4/7 23:39
 * @description : Class å¯¹è±¡çš„ä½¿ç”¨
 */

public class Demo2 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException {
        Class class1 = Class.forName("com.cunyu.Person");

        Field field1 = class1.getDeclaredField("id");
        System.out.println(field1);
        Field field3 = class1.getDeclaredField("rank");
        System.out.println(field3);
        Field field2 = class1.getDeclaredField("age");
        System.out.println(field2);
    }
}
```

![](./assets/20220716-reflection/getDeclaredField.png)

è§‚å¯Ÿä¸Šé¢çš„ç»“æœå¯çŸ¥ï¼Œè¯¥æ–¹æ³•å¯ç”¨äºè·å–æŒ‡å®šçš„æˆå‘˜å˜é‡ï¼Œä¸ç”¨è€ƒè™‘æˆå‘˜å˜é‡ä¿®é¥°ç¬¦çš„é™åˆ¶ï¼ˆ**ä¸åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚ä½†æ˜¯åœ¨åˆ©ç”¨ `set`ã€`get` æ–¹æ³•æ¥è·å–å’Œè®¾ç½® `private`ã€`protected` ä¿®é¥°çš„æˆå‘˜å˜é‡æ—¶ï¼Œéœ€è¦åˆ©ç”¨ `setAccessible()` æ¥å¿½ç•¥è®¿é—®å…¨æ–°å•Šä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥ï¼Œå¦åˆ™ç¨‹åºå°†ä¼šæŠ¥é”™ã€‚

#### è·å–æ„é€ æ–¹æ³•

| æ–¹æ³•                                                             | è¯´æ˜                                                                                 |
| ---------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| `Constructor<?>[] getConstructors()`                             | è¿”å›åŒ…å«ä¸€ä¸ªæ•°ç»„ `Constructor`å¯¹è±¡åå°„ç”±æ­¤è¡¨ç¤ºçš„ç±»çš„æ‰€æœ‰å…¬å…±æ„é€ ç±»å¯¹è±¡               |
| `Constructor<T> getConstructor(ç±»<?>... parameterTypes)`         | è¿”å›ä¸€ä¸ª `Constructor` å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åæ˜  `Constructor`å¯¹è±¡è¡¨ç¤ºçš„ç±»çš„æŒ‡å®šçš„å…¬å…±ç±»å‡½æ•°  |
| `Constructor<?>[] getDeclaredConstructors()`                     | è¿”å›ä¸€ä¸ªåæ˜  `Constructor` å¯¹è±¡è¡¨ç¤ºçš„ç±»å£°æ˜çš„æ‰€æœ‰ `Constructor` å¯¹è±¡çš„æ•°ç»„ç±»         |
| `Constructor<T> getDeclaredConstructor(ç±»<?>... parameterTypes)` | è¿”å›ä¸€ä¸ª `Constructor` å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åæ˜  `Constructor` å¯¹è±¡è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šç±»å‡½æ•° |

```java
package com.cunyu;

import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo3
 * @date : 2021/4/8 13:28
 * @description : æ„é€ å¯¹è±¡è·å–
 */

public class Demo3 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
        Class personClass = Class.forName("com.cunyu.Person");

//        1. è·å–æ‰€æœ‰æ„é€ æ–¹æ³•
        System.out.println("æ‰€æœ‰æ„é€ æ–¹æ³•");
        Constructor[] constructors = personClass.getConstructors();
        for (Constructor constructor : constructors) {
            System.out.println(constructor);
        }

//        2. è·å–æŒ‡å®šæ„é€ æ–¹æ³•

//        ç©ºå‚æ„é€ æ–¹æ³•
        System.out.println("ç©ºå‚æ„é€ æ–¹æ³•");
        Constructor constructor1 = personClass.getConstructor();
        System.out.println(constructor1);
//        å¸¦å‚æ„é€ æ–¹æ³•
        System.out.println("å¸¦å‚æ„é€ æ–¹æ³•");
        Constructor constructor2 = personClass.getConstructor(int.class, String.class, long.class, long.class, float.class, int.class);
        System.out.println(constructor2);

//        è·å–æ„é€ æ–¹æ³•åï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥åˆ›å»ºå¯¹è±¡
        System.out.println("ç©ºå‚åˆ›å»ºå¯¹è±¡");
//        ç¬¬ä¸€ç§æ–¹æ³•
        Object person = constructor1.newInstance();
        System.out.println(person);
//        ç¬¬äºŒç§æ–¹æ³•
        Object person1 = personClass.newInstance();
        System.out.println(person1);

        System.out.println("å¸¦å‚åˆ›å»ºå¯¹è±¡");
        Object object = constructor2.newInstance(20, "æ‘é›¨é¥", 1312020, 3, 99.0F, 2);
        System.out.println(object);
    }
}
```

![](./assets/20220716-reflection/constructor.png)

- `Constructor<?>[] getConstructors()`

  ç±»ä¼¼äºé€šè¿‡ `Class` å®ä¾‹æ¥è·å–æˆå‘˜å˜é‡ï¼Œè¯¥æ–¹æ³•ç”¨äºè·å–æ‰€æœ‰ `public` æ‰€ä¿®é¥°çš„æ„é€ æ–¹æ³•ï¼ˆ**åŒ…æ‹¬çˆ¶ç±»**ï¼‰ï¼›

- `Constructor<T> getConstructor(ç±»<?>... parameterTypes)`

è¯¥æ–¹æ³•ç”¨äºè·å–æŸä¸€æŒ‡å®šå‚æ•°ç±»å‹åçš„ `public` æ‰€ä¿®é¥°çš„æ„é€ æ–¹æ³•ï¼ˆ**åŒ…æ‹¬çˆ¶ç±»**ï¼‰ï¼›

- `Constructor<?>[] getDeclaredConstructors()`

è¯¥æ–¹æ³•ç”¨äºè·å–æ‰€æœ‰ `public` æ‰€ä¿®é¥°çš„æ„é€ æ–¹æ³•ï¼ˆ**ä¸åŒ…æ‹¬çˆ¶ç±»**ï¼‰ï¼›

- `Constructor<T> getDeclaredConstructor(ç±»<?>... parameterTypes)`

è¯¥æ–¹æ³•ç”¨äºè·å–æŸä¸€æŒ‡å®šå‚æ•°ç±»å‹åçš„ `public` æ‰€ä¿®é¥°çš„æ„é€ æ–¹æ³•ï¼ˆ**ä¸åŒ…æ‹¬çˆ¶ç±»**ï¼‰ï¼›

è€Œè·å–åˆ°æ„é€ æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ `newInstance()` æ–¹æ³•æ¥åˆ›å»ºç±»çš„å®ä¾‹ã€‚ç‰¹æ®Šçš„ï¼Œå¦‚æœæˆ‘ä»¬çš„æ„é€ æ–¹æ³•æ˜¯æ— å‚çš„ï¼Œæ­¤æ—¶åˆ™å¯ä»¥ç›´æ¥åˆ©ç”¨ `Class.newInstance()` æ¥æ„é€ å®ä¾‹ã€‚

#### è·å–æˆå‘˜æ–¹æ³•

| æ–¹æ³•                                                             | è¯´æ˜                                                                                                                                    |
| ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| `Method[] getMethods()`                                          | è¿”å›åŒ…å«ä¸€ä¸ªæ•°ç»„ æ–¹æ³•å¯¹è±¡åå°„ç”±æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æ‰€æœ‰å…¬å…±æ–¹æ³• ç±»å¯¹è±¡ï¼ŒåŒ…æ‹¬é‚£äº›ç”±ç±»æˆ–æ¥å£å’Œé‚£äº›ä»è¶…ç±»å’Œè¶…æ¥å£ç»§æ‰¿çš„å£°æ˜                  |
| `Method getMethod(String name, ç±»<?>... parameterTypes)`         | è¿”å›ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œå®ƒåæ˜ æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šå…¬å…±æˆå‘˜æ–¹æ³• ç±»å¯¹è±¡                                                                       |
| `Method[] getDeclaredMethods()`                                  | è¿”å›åŒ…å«ä¸€ä¸ªæ•°ç»„æ–¹æ³•å¯¹è±¡åå°„çš„ç±»æˆ–æ¥å£çš„æ‰€æœ‰å£°æ˜çš„æ–¹æ³•ï¼Œé€šè¿‡æ­¤è¡¨ç¤º ç±»å¯¹è±¡ï¼ŒåŒ…æ‹¬å…¬å…±ï¼Œä¿æŠ¤ï¼Œé»˜è®¤ï¼ˆåŒ…ï¼‰è®¿é—®å’Œç§æœ‰æ–¹æ³•ï¼Œä½†ä¸åŒ…æ‹¬ç»§æ‰¿çš„æ–¹æ³• |
| `Method getDeclaredMethod(String name, ç±»<?>... parameterTypes)` | è¿”å›ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œå®ƒåæ˜ æ­¤è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šå£°æ˜çš„æ–¹æ³•ç±»å¯¹è±¡                                                                          |

```java
package com.cunyu;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo4
 * @date : 2021/4/8 13:51
 * @description : æˆå‘˜æ–¹æ³•è·å–
 */

public class Demo4 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        Class personClass = Class.forName("com.cunyu.Person");

//        è·å–æ‰€æœ‰ public æˆå‘˜æ–¹æ³•
        System.out.println("è·å–æ‰€æœ‰æˆå‘˜æ–¹æ³•");
        Method[] methods = personClass.getMethods();
        for (Method method : methods) {
            System.out.println(method);
        }

//        è·å–æŒ‡å®šåç§°çš„æ–¹æ³•
        System.out.println("è·å–æŒ‡å®šåç§°çš„æ–¹æ³•");
        Method getAgeMethod = personClass.getMethod("getAge");
        System.out.println(getAgeMethod);

//        æ‰§è¡Œæ–¹æ³•
        Person person = new Person(20, "æ‘é›¨é¥", 1312020, 3, 99.0F, 2);
        int age = (int) getAgeMethod.invoke(person);
        System.out.println(age);

    }
}
```

![](./assets/20220716-reflection/getMethods.png)

- `Method[] getMethods()`

ç”¨äºè·å–å½“å‰ç±»çš„æ‰€æœ‰ `public` æ‰€ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ï¼ˆ**åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚

- `Method getMethod(String name, ç±»<?>... parameterTypes)`

ç”¨äºè·å–å½“å‰ç±»çš„æŸä¸€ä¸ªæŒ‡å®šåç§° `public` æ‰€ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ï¼ˆ**åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚

- `Method[] getDeclaredMethods()`

ç”¨äºè·å–å½“å‰ç±»çš„æ‰€æœ‰ `public` æ‰€ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ï¼ˆ**ä¸åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚

- `Method getDeclaredMethod(String name, ç±»<?>... parameterTypes)`

ç”¨äºè·å–å½“å‰ç±»çš„æŸä¸€ä¸ªæŒ‡å®šåç§° `public` æ‰€ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ï¼ˆ**ä¸åŒ…æ‹¬çˆ¶ç±»**ï¼‰ã€‚

è€Œå½“æˆ‘ä»¬è·å–åˆ°ç±»çš„æˆå‘˜æ–¹æ³•åï¼Œå¦‚æœè¦æ‰§è¡ŒæŸä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ `invoke()` æ–¹æ³•æ¥æ‰§è¡Œè¯¥æ–¹æ³•ã€‚

#### è·å–ç±»å

```java
package com.cunyu;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Demo5
 * @date : 2021/4/8 14:06
 * @description : è·å–ç±»å
 */

public class Demo5 {
    public static void main(String[] args) throws ClassNotFoundException {
        Person person = new Person();
        Class personClass = person.getClass();

        String className = personClass.getName();
        System.out.println(className);
    }
}
```

![](./assets/20220716-reflection/getName.png)

- `String getName()`

ä»ä¸Šè¿°ç¨‹åºçš„ç»“æœå¯çŸ¥ï¼Œå½“æˆ‘ä»¬è·å–åˆ° `Class` å¯¹è±¡ä¹‹åï¼Œå¦‚æœä¸çŸ¥é“ç±»çš„å…¨åï¼Œå°±å¯ä»¥ä½¿ç”¨ `getName()` æ¥è·å–è¯¥ç±»çš„å…¨åã€‚

## åå°„å®ä¾‹

å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹éœ€æ±‚ï¼šåœ¨ä¸æ”¹å˜ç±»çš„ä»£ç çš„å‰æä¸‹ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºä»»æ„ç±»çš„å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå…¶ä¸­çš„æ–¹æ³•ã€‚

æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ **é…ç½®æ–‡ä»¶ + åå°„** çš„æ–¹å¼æ¥å®ç°è¿™ä¸€æ•ˆæœï¼Œè€Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨æ‰€ç”¨æ¡†æ¶ä¸­çš„åŸºç¡€ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨åå°„åï¼Œåªéœ€è¦é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å°±èƒ½å¤Ÿä¸ç”¨å»æ”¹ä»£ç å°±å®ç°å¯¹åº”çš„åŠŸèƒ½ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ª `Student`ï¼Œä¸€ä¸ª `Teacher`ï¼Œä¸¤è€…çš„å®šä¹‰å¦‚ä¸‹ï¼›

```java
package com.cunyu;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Teacher
 * @date : 2021/4/8 15:15
 * @description : æ•™å¸ˆç±»
 */

public class Teacher {
    private String name;
    private int age;

    public void teach() {
        System.out.println("æ•™ä¹¦è‚²äººâ€¦â€¦");
    }
}
```

```java
package com.cunyu;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : Student
 * @date : 2021/4/8 15:16
 * @description : å­¦ç”Ÿç±»
 */

public class Student {
    private String name;
    private float score;

    public void study() {
        System.out.println("å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šâ€¦â€¦");
    }
}
```

è¦å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œé€šå¸¸éœ€è¦å¦‚ä¸‹æ­¥éª¤ï¼š

1.  å°†è¦åˆ›å»ºå¯¹è±¡çš„å…¨ç±»åå’Œè¦æ‰§è¡Œçš„æ–¹æ³•éƒ½é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼›

å®šä¹‰çš„é…ç½®æ–‡ä»¶ `prop.properties` ï¼Œå…¶ä¸­ä¸»è¦å†…å®¹åŒ…æ‹¬ `className` å’Œ `methodName` ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä»£è¡¨ç±»çš„å…¨ç±»åå’Œè¦è°ƒç”¨æ–¹æ³•çš„åå­—ã€‚ä¸€ä¸ªå…·ä½“å®ä¾‹å¦‚ä¸‹ï¼Œåˆ†åˆ«ä»£è¡¨åä¸º `Student` çš„ç±»å’Œåä¸º `study` çš„æ–¹æ³•ã€‚

```properties
className=com.cunyu.Student
methodName=study
```

2.  ç„¶ååœ¨ä¸»æ–¹æ³•ä¸­åŠ è½½è¯»å–é…ç½®æ–‡ä»¶ï¼›

```java
//        åˆ›å»ºé…ç½®æ–‡ä»¶å¯¹è±¡
Properties properties = new Properties();
//        åŠ è½½é…ç½®æ–‡ä»¶
ClassLoader classLoader = ReflectTest.class.getClassLoader();
InputStream inputStream = classLoader.getResourceAsStream("prop.properties");
properties.load(inputStream);

//        è·å–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®
String className = properties.getProperty("className");
String methodName = properties.getProperty("methodName");
```

3.  åˆ©ç”¨åå°„æŠ€æœ¯å°†ç±»åŠ è½½åˆ°å†…å­˜ä¸­ï¼›

```java
//        åŠ è½½è¿›å†…å­˜
Class name = Class.forName(className);
```

4.  æ¥ç€åˆ©ç”¨ `newInstance()` æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼›

```java
//        åˆ›å»ºå®ä¾‹
Object object = name.newInstance();
```

5.  æœ€ååˆ™æ˜¯åˆ©ç”¨ `invoke()` æ–¹æ³•æ¥æ‰§è¡Œæ–¹æ³•ï¼›

```java
//        è·å–å¹¶æ‰§è¡Œæ–¹æ³•
Method method = name.getMethod(methodName);
method.invoke(object);
```

å°†æ•´ä¸ªæµç¨‹æ±‡æ€»èµ·æ¥å°±æ˜¯ï¼š

```java
package com.cunyu;

import java.io.IOException;
import java.io.InputStream;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Properties;

/**
 * @author : cunyu
 * @version : 1.0
 * @className : ReflectTest
 * @date : 2021/4/8 15:27
 * @description : æµ‹è¯•
 */

public class ReflectTest {
    public static void main(String[] args) throws IOException, ClassNotFoundException, IllegalAccessException, InstantiationException, InvocationTargetException, NoSuchMethodException {
//        åˆ›å»ºé…ç½®æ–‡ä»¶å¯¹è±¡
        Properties properties = new Properties();
//        åŠ è½½é…ç½®æ–‡ä»¶
        ClassLoader classLoader = ReflectTest.class.getClassLoader();
        InputStream inputStream = classLoader.getResourceAsStream("prop.properties");
        properties.load(inputStream);

//        è·å–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®
        String className = properties.getProperty("className");
        String methodName = properties.getProperty("methodName");

//        åŠ è½½è¿›å†…å­˜
        Class name = Class.forName(className);

//        åˆ›å»ºå®ä¾‹
        Object object = name.newInstance();

//        è·å–å¹¶æ‰§è¡Œæ–¹æ³•
        Method method = name.getMethod(methodName);
        method.invoke(object);
    }
}
```

æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹åŠ¨é…ç½®æ–‡ä»¶ `prop.properties` ä¸­çš„é…ç½®å³å¯è¾“å‡ºä¸åŒç»“æœï¼›

![](./assets/20220716-reflection/prop.png)

![](./assets/20220716-reflection/reflecttest.png)

## æ€»ç»“

å¥½äº†ï¼Œæ„Ÿè°¢è€å¿ƒçœ‹åˆ°è¿™é‡Œçš„å„ä½ã€‚å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œé‚£å°±ç»™æˆ‘ç‚¹ä¸ªèµå§ï¼

æœ€åï¼Œå¯¹äºæ–‡ä¸­çŸ¥è¯†ç‚¹æœ‰é”™è¯¯æˆ–æ¬ ç¼ºçš„åœ°æ–¹ï¼Œè¿˜è¯·å¤§å®¶è§è°…ï¼Œæ¬¢è¿å¤§å®¶è¯„è®ºç•™è¨€ç»™æˆ‘æŒ‡æ­£~

**å…³æ³¨å…¬ä¼—å·ï¼Œè·å–æœ€æ–°æ–‡ç« æ›´æ–°**

::: center
![](https://cdn.jsdelivr.net/gh/cunyu1943/cunyu1943@main/imgs/wepublic.gif =200x)
:::

## â³ è”ç³»

æƒ³è§£é”æ›´å¤šçŸ¥è¯†ï¼Ÿä¸å¦¨å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼š**æ‘é›¨é¥ï¼ˆidï¼šJavaParkï¼‰**ã€‚

æ‰«ä¸€æ‰«ï¼Œæ¢ç´¢å¦ä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚

<center>
<img src="/contact/contact.png" width="300">
</center>